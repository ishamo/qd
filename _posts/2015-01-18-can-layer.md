---
layout: post
title: 简单的CAN层包裹函数
date:  2015-01-18 14:19:05    
category: 编程
tags: CAN
---

上周五中午我正准备去吃饭的时候，电梯里碰到了吴老师，然后吴老师问起我那个CAN层函数封装的进度怎么样。这个，我觉得本来那个CAN板卡人家厂家提供的接口已经比较简单了，所以一直没太当回事（罪过）。然后吴老师教育了我一通，深深地感到自己想问题实在是太简单了。吴老师问我下周一之前是不是能够搞定，这个当时我是没有把握的，但是觉得吴老师有点生气了，所以连连说没有问题- -

然后我一个周未也没有去什么地方，本来是想着趁周未出去好好游玩一番的。但是我到现在已经把问题貌似解决了，所以还有大半个下午，不过小伙伴们好像都不知道跑到神马地方去了。

我编写的这些函数我感觉都不好，CAN层的IO本来应该要算是慢速设备了，所以我们在给它做IO时应该要定时操作才行，总之需要考虑的问题是比较多的，如果时间充足的话，我希望能将它写的完善一点。不管怎么样，总算是能够交差了吧。虽然周一时吴老师可能会痞我一下，但是应该不会太责怪我吧。

我在编写这些接口函数时碰到个BUG真是花了我好多时间啊，我觉得从逻辑上来讲我编的收发函数应该都没有问题，但是不知道为什么收发的时候总是会在尾部丢一些信息，单步调试了很久都没找出问题，因为一但我单步调试，那么就完全没问题，可是直接运行的话总是出问题，之后我想是不是要在发的地方加个Sleep才行，然后果然就好了。我真是彻彻底底的知道慢速设备是有多么的“可爱”了呀。

最后应该丢一张阳光明媚的图才好，可是为了祭奠一下这个周未，就放一张这个丑丑的界面吧－－是我编好函数之后做的一些测试。

![CAN-layer](http://shamospace.qiniudn.com/can-layer.png)



















